(this["webpackJsonpstudent-app"]=this["webpackJsonpstudent-app"]||[]).push([[0],{181:function(e,t,a){e.exports=a(350)},186:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){},350:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(8),o=a.n(i),c=(a(186),a(187),a(188),a(68)),s=a(19),l=a(36),m=a.n(l),u=a(67),d=a(33),f="https://icpc-backend-m29.herokuapp.com/",p={Team:"".concat(f,"teams/"),Contest:"".concat(f,"contest/")},h=a(59),E=a(60),v=a(65),y=a(64),g=a(80),C=a(355),b=a(356),S=a(357),k=a(51),O=a(12),j=a.n(O),R=function(e){return null===e||void 0===e||e.hasOwnProperty("length")&&0===e.length||e.constructor===Object&&0===Object.keys(e).length},N=(g.a.Option,C.a.Group,Object.freeze({SUCCESS:"Success",ERROR:"error"})),w=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).clearForm=function(){var e=n.state,t=(e.name,e.state,e.rank,e.validation);t.name.error="",t.state.error="",t.rank.error="",n.setState({name:"",state:"",rank:"",validation:t})},n.onSubmit=function(e){e.preventDefault();var t=n.state,a=t.name,r=t.state,i=t.rank,o=t.validation,c=n.props,s=c.selectedTeam,l=c.createTeam,m=c.updateTeam;o.name.error||o.rank.error||o.state.error||(R(s)?l(a,r,i):m(s.key,a,r,i))},n.onNameChange=function(e){n.setState({name:e.target.value})},n.onStateChange=function(e){n.setState({state:e.target.value})},n.onRankChange=function(e){n.setState({rank:e.target.value})},n.validateName=function(){var e=n.state.validation;e.name.required&&""===n.state.name?e.name.error="This field is required":e.name.error="",n.setState({validation:e})},n.validateState=function(){var e=n.state.validation;n.setState({validation:e})},n.disablePastDays=function(e){return e&&e<=j()().endOf("day")},n.state={name:"",rank:"",state:"",validation:{name:{required:!0,error:""},rank:{required:!1,error:""},state:{required:!0,error:""}}},n}return Object(E.a)(a,[{key:"onUpdate",value:function(e,t){var a=this.props,n=a.clearFlag,r=a.setClearFlag,i=a.selectedTeam;if(n!==e.clearFlag&&n&&(this.clearForm(),r(!1)),!R(i)&&e.selectedTeam.key!==i.key){var o=this.state.validation;o.name.error="",o.state.error="",o.rank.error="",this.setState({name:i.name,state:i.state,rank:i.rank,validation:o})}}},{key:"render",value:function(){var e=this.props,t=e.selectedTeam,a=e.clearStatus;return r.a.createElement(n.Fragment,null,r.a.createElement("form",null,r.a.createElement("div",{className:"form-row"},r.a.createElement(b.a,{type:"flex",justify:"start",align:"middle"},r.a.createElement(S.a,{span:3},r.a.createElement("label",{className:"required-field"},"Name")),r.a.createElement(S.a,{span:8},r.a.createElement(C.a,{value:this.state.name,onChange:this.onNameChange,onBlur:this.validateName,onClick:a}),this.state.validation.name.error&&r.a.createElement("div",{className:"input-error"},this.state.validation.name.error)))),r.a.createElement("div",{className:"form-row"},r.a.createElement(b.a,{type:"flex",justify:"start"},r.a.createElement(S.a,{span:3},r.a.createElement("label",{className:"required-field"},"State")),r.a.createElement(S.a,{span:8},r.a.createElement(C.a,{value:this.state.state,onChange:this.onStateChange,onClick:a}),this.state.validation.state.error&&r.a.createElement("div",{className:"input-error"},this.state.validation.state.error)))),r.a.createElement("div",{className:"form-row"},r.a.createElement(b.a,{type:"flex",justify:"start"},r.a.createElement(S.a,{span:3},r.a.createElement("label",null,"Rank")),r.a.createElement(S.a,{span:8},r.a.createElement(C.a,{value:this.state.rank,onChange:this.onRankChange,onClick:a}),this.state.validation.rank.error&&r.a.createElement("div",{className:"input-error"},this.state.validation.rank.error)))),r.a.createElement(k.a,{type:"primary",htmlType:"submit",onClick:this.onSubmit},R(t)?"Create":"Update")))}}]),a}(n.Component),T=a(351),_=a(353);var x=function(e){var t=e.teamsInfo,a=e.setSelectedTeam,n=e.deleteTeam,i=[{title:"Name",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("div",null,e)}},{title:"Rank",dataIndex:"rank",key:"rank",render:function(e){return r.a.createElement("div",null,e)}},{title:"State",dataIndex:"state",key:"state",render:function(e){return r.a.createElement("div",null,R(e)?"-":e.substring(0,10))}},{title:"Action",key:"action",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("a",{onClick:function(){return a(t)}},"Edit"),r.a.createElement(T.a,{type:"vertical"}),r.a.createElement("a",{onClick:function(){return n(t.key)}},"Delete"))}}],o=t.map((function(e){return{key:e.id,name:e.name,rank:e.rank,state:e.state}}));return r.a.createElement(_.a,{columns:i,dataSource:o})},q=a(352),U=a(130),F=a(11),D=(a(348),q.a.Header),I=q.a.Content,A=q.a.Footer,P=q.a.Sider;var J=function(e){var t=function(t){Object(v.a)(n,t);var a=Object(y.a)(n);function n(){return Object(h.a)(this,n),a.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){return r.a.createElement(q.a,null,r.a.createElement(P,{breakpoint:"lg",collapsedWidth:"0"},r.a.createElement("div",{className:"logo slider-header"},"React App"),r.a.createElement(U.a,{theme:"dark",mode:"inline"},r.a.createElement(U.a.Item,{key:"1"},r.a.createElement(c.b,{to:"/"},r.a.createElement(F.a,{type:"home"}),r.a.createElement("span",{className:"nav-text"},"Home"))),r.a.createElement(U.a.Item,{key:"2"},r.a.createElement(c.b,{to:"/creation"},r.a.createElement(F.a,{type:"form"}),r.a.createElement("span",{className:"nav-text"},"Team"))),r.a.createElement(U.a.Item,{key:"3"},r.a.createElement(c.b,{to:"/contest"},r.a.createElement(F.a,{type:"form"}),r.a.createElement("span",{className:"nav-text"},"Contest"))))),r.a.createElement(q.a,null,r.a.createElement(D,{className:"header",style:{background:"#e6f7ff",padding:0}},r.a.createElement("span",null,"Assignment on React")),r.a.createElement(I,{className:"content",style:{margin:"24px 16px 0"}},r.a.createElement(e,this.props)),r.a.createElement(A,{className:"footer",style:{textAlign:"center"}},"React CRUD example")))}}]),n}(r.a.Component);return t.displayName="LayoutWrapper(".concat(function(e){return e.displayName||e.name||"Component"}(e),")"),t};var z=J((function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],i=t[1],o=Object(n.useState)({}),c=Object(d.a)(o,2),s=c[0],l=c[1],f=Object(n.useState)(N.SUCCESS),h=Object(d.a)(f,2),E=h[0],v=h[1],y=Object(n.useState)(""),g=Object(d.a)(y,2),C=g[0],b=g[1],S=Object(n.useState)(!1),k=Object(d.a)(S,2),O=k[0],j=k[1],R=function(){var e=Object(u.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p.Team)).then((function(e){if(e.ok)return e.json();throw new Error("Error while fetching team details")})).then((function(e){i(e),v(N.SUCCESS)})).catch((function(e){v(N.ERROR),b(e.toString())}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){R()}),[]);var T=function(){var e=Object(u.a)(m.a.mark((function e(t,a,n,r,i,o){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c={method:"PUT",body:JSON.stringify({id:t,name:a,emailOfCreator:n,dateOfCreation:r,type:i,description:o}),headers:{"Content-Type":"application/json"}},fetch(p.Team,c).then((function(e){if(e.ok)return e.json();throw new Error('"Email of Creator must be unique."')})).then((function(e){R(),j(!0),v(N.SUCCESS),l({}),b("Updated successfully")})).catch((function(e){v(N.ERROR),b(e.toString())}));case 2:case"end":return e.stop()}}),e)})));return function(t,a,n,r,i,o){return e.apply(this,arguments)}}(),_=E===N.ERROR?"error-status":"success-status";return r.a.createElement(n.Fragment,null,r.a.createElement(w,{createTeam:function(e,t,a,n,r){var i={method:"POST",body:JSON.stringify({name:e,emailOfCreator:t,dateOfCreation:a,type:n,description:r}),headers:{"Content-Type":"application/json"}};fetch(p.Team,i).then((function(e){if(e.ok)return e.json();throw new Error("EmailOfCreator must be unique.")})).then((function(e){R(),j(!0),v(N.SUCCESS),b("Saved successfully")})).catch((function(e){v(N.ERROR),console.log(e),b(e.toString())}))},fetchTeamsInfo:R,updateTeam:T,clearFlag:O,setClearFlag:j,selectedTeam:s,clearStatus:function(){v(N.SUCCESS),b("")}}),C&&r.a.createElement("div",{className:_},C),r.a.createElement(x,{teamsInfo:a,setSelectedTeam:l,deleteTeam:function(e){fetch("".concat(p.Team,"delete/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("Error while deleting team.");R()})).catch((function(e){v(N.ERROR),b(e.toString())}))}}))})),B=a(354),L=(g.a.Option,C.a.Group,Object.freeze({SUCCESS:"Success",ERROR:"error"})),W=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).clearForm=function(){var e=n.state,t=(e.name,e.capacity,e.registration_from,e.registration_to,e.editable,e.validation);t.name.error="",t.capacity.error="",t.registration_from.error="",t.registration_to.error="",t.editable.error="",n.setState({name:"",capacity:"",registration_from:"",registration_to:"",editable:"",validation:t})},n.onSubmit=function(e){e.preventDefault();var t=n.state,a=t.name,r=t.capacity,i=t.registration_from,o=t.registration_to,c=t.editable,s=t.validation,l=n.props,m=l.selectedContest,u=l.createContest,d=l.updateContest;s.name.error||s.registration_from.error||s.capacity.error||s.registration_to.error||s.editable.error||(R(m)?u(a,r,i,o,c):d(m.key,a,r,i,o,c))},n.onNameChange=function(e){n.setState({name:e.target.value})},n.onCapacityChange=function(e){n.setState({capacity:e.target.value})},n.onDateOfCreationChange=function(e){n.setState({registration_from:e})},n.onDateOfCreationChange2=function(e){n.setState({registration_to:e})},n.onTypeChange=function(e){n.setState({registration_to:e.target.value})},n.onEditableChange=function(e){n.setState({editable:e.target.value})},n.validateName=function(){var e=n.state.validation;e.name.required&&""===n.state.name?e.name.error="This field is required":e.name.error="",n.setState({validation:e})},n.validateEmailOfCreator=function(){var e,t=n.state.validation;""!==n.state.capacity?(e=n.state.capacity,/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())?t.capacity.error="":t.capacity.error="This field is not valid email.",n.setState({validation:t})):t.capacity.required&&(t.capacity.error="This field is required.",n.setState({validation:t}))},n.validateType=function(){var e=n.state.validation;e.registration_to.required&&""===n.state.registration_to?e.registration_to.error="This field is required.":e.registration_to.error="",n.setState({validation:e})},n.disablePastDays=function(e){return e&&e<=j()().endOf("day")},n.state={name:"",capacity:"",registration_from:"",registration_to:"",editable:"",validation:{name:{required:!0,error:""},capacity:{required:!0,error:""},registration_from:{required:!0,error:""},registration_to:{required:!0,error:""},editable:{required:!1,error:""}}},n}return Object(E.a)(a,[{key:"onUpdate",value:function(e,t){var a=this.props,n=a.clearFlag,r=a.setClearFlag,i=a.selectedContest;if(n!==e.clearFlag&&n&&(this.clearForm(),r(!1)),!R(i)&&e.selectedContest.key!==i.key){var o=this.state.validation;o.name.error="",o.capacity.error="",o.registration_from.error="",o.registration_to.error="",o.editable.error="",this.setState({name:i.name,capacity:i.capacity,registration_from:i.registration_from,registration_to:i.registration_to,editable:i.editable,validation:o})}}},{key:"render",value:function(){var e=this.props,t=e.selectedContest,a=e.clearStatus;return r.a.createElement(n.Fragment,null,r.a.createElement("form",null,r.a.createElement("div",{className:"form-row"},r.a.createElement(b.a,{type:"flex",justify:"start",align:"middle"},r.a.createElement(S.a,{span:3},r.a.createElement("label",{className:"required-field"},"Contest Name")),r.a.createElement(S.a,{span:8},r.a.createElement(C.a,{value:this.state.name,onChange:this.onNameChange,onBlur:this.validateName,onClick:a}),this.state.validation.name.error&&r.a.createElement("div",{className:"input-error"},this.state.validation.name.error)))),r.a.createElement("div",{className:"form-row"},r.a.createElement(b.a,{type:"flex",justify:"start"},r.a.createElement(S.a,{span:3},r.a.createElement("label",{className:"required-field"},"Capacity")),r.a.createElement(S.a,{span:8},r.a.createElement(C.a,{value:this.state.capacity,onChange:this.onCapacityChange,onClick:a}),this.state.validation.capacity.error&&r.a.createElement("div",{className:"input-error"},this.state.validation.capacity.error)))),r.a.createElement("div",{className:"form-row"},r.a.createElement(b.a,{type:"flex",justify:"start"},r.a.createElement(S.a,{span:3},r.a.createElement("label",null,"Registration From")),r.a.createElement("div",{className:{display:"flex"},onClick:a},r.a.createElement(B.a,{style:{display:"flex"},value:this.state.registration_from?j()(this.state.registration_from):null,onChange:this.onDateOfCreationChange,disabledDate:this.disablePastDays})))),r.a.createElement("div",{className:"form-row"},r.a.createElement(b.a,{type:"flex",justify:"start"},r.a.createElement(S.a,{span:3},r.a.createElement("label",{className:"required-field"},"Registration To")),r.a.createElement("div",{className:{display:"flex"},onClick:a},r.a.createElement(B.a,{style:{display:"flex"},value:this.state.registration_to?j()(this.state.registration_to):null,onChange:this.onDateOfCreationChange2,disabledDate:this.disablePastDays})))),r.a.createElement("div",{className:"form-row"},r.a.createElement(b.a,{type:"flex",justify:"start"},r.a.createElement(S.a,{span:3},r.a.createElement("label",null,"Editable")),r.a.createElement(S.a,{span:8},r.a.createElement(C.a,{value:this.state.editable,onChange:this.onEditableChange,onClick:a}),this.state.validation.editable.error&&r.a.createElement("div",{className:"input-error"},this.state.validation.editable.error)))),r.a.createElement(k.a,{registration_to:"primary",htmlType:"submit",onClick:this.onSubmit},R(t)?"Create":"Update")))}}]),a}(n.Component);var G=function(e){var t=e.ContestsInfo,a=e.setSelectedContest,n=e.deleteContest,i=[{title:"Name",dataIndex:"name",key:"name",render:function(e){return r.a.createElement("div",null,e)}},{title:"Capacity",dataIndex:"capacity",key:"capacity",render:function(e){return r.a.createElement("div",null,e)}},{title:"Registration From",dataIndex:"registration_from",key:"registration_from",render:function(e){return r.a.createElement("div",null,R(e)?"-":e.substring(0,10))}},{title:"Registration To",dataIndex:"registration_to",key:"registration_to",render:function(e){return r.a.createElement("div",null,R(e)?"-":e.substring(0,10))}},{title:"Editable",dataIndex:"editable",key:"editable",render:function(e){return r.a.createElement("div",null,e)}},{title:"Action",key:"action",render:function(e,t){return r.a.createElement("span",null,r.a.createElement("a",{onClick:function(){return a(t)}},"Edit"),r.a.createElement(T.a,{type:"vertical"}),r.a.createElement("a",{onClick:function(){return n(t.key)}},"Delete"))}}],o=t.map((function(e){return{key:e.id,name:e.name,capacity:e.capacity,registration_from:e.registration_from,registration_to:e.registration_to,editable:e.editable}}));return r.a.createElement(_.a,{columns:i,dataSource:o})};var H=J((function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],i=t[1],o=Object(n.useState)({}),c=Object(d.a)(o,2),s=c[0],l=c[1],f=Object(n.useState)(L.SUCCESS),h=Object(d.a)(f,2),E=h[0],v=h[1],y=Object(n.useState)(""),g=Object(d.a)(y,2),C=g[0],b=g[1],S=Object(n.useState)(!1),k=Object(d.a)(S,2),O=k[0],j=k[1],R=function(){var e=Object(u.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p.Contest)).then((function(e){if(e.ok)return e.json();throw new Error("Error while fetching Contest details")})).then((function(e){i(e),v(L.SUCCESS)})).catch((function(e){v(L.ERROR),b(e.toString())}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){R()}),[]);var N=function(){var e=Object(u.a)(m.a.mark((function e(t,a,n,r,i,o){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c={method:"PUT",body:JSON.stringify({id:t,name:a,capacity:n,registration_from:r,registration_to:i,editable:o}),headers:{"Content-Type":"application/json"}},fetch(p.Contest,c).then((function(e){if(e.ok)return e.json();throw new Error('"Found error."')})).then((function(e){R(),j(!0),v(L.SUCCESS),l({}),b("Updated successfully")})).catch((function(e){v(L.ERROR),b(e.toString())}));case 2:case"end":return e.stop()}}),e)})));return function(t,a,n,r,i,o){return e.apply(this,arguments)}}(),w=E===L.ERROR?"error-status":"success-status";return r.a.createElement(n.Fragment,null,r.a.createElement(W,{createContest:function(e,t,a,n,r){var i={method:"POST",body:JSON.stringify({name:e,capacity:t,registration_from:a,registration_to:n,editable:r}),headers:{"Content-Type":"application/json"}};fetch(p.Contest,i).then((function(e){if(e.ok)return e.json();throw new Error("capacity must be unique.")})).then((function(e){R(),j(!0),v(L.SUCCESS),b("Saved successfully")})).catch((function(e){v(L.ERROR),console.log(e),b(e.toString())}))},fetchContestsInfo:R,updateContest:N,clearFlag:O,setClearFlag:j,selectedContest:s,clearStatus:function(){v(L.SUCCESS),b("")}}),C&&r.a.createElement("div",{className:w},C),r.a.createElement(G,{ContestsInfo:a,setSelectedContest:l,deleteContest:function(e){fetch("".concat(p.Contest,"delete/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("Error while deleting Contest.");R()})).catch((function(e){v(L.ERROR),b(e.toString())}))}}))}));var Z=J((function(){return r.a.createElement("div",{className:"body-content"},r.a.createElement("div",null,"REACT CRUD Assignment"),r.a.createElement("p",null,"CRUD example of Contest and Teams"))}));function $(){return r.a.createElement(c.a,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",key:1,component:Z}),r.a.createElement(s.a,{exact:!0,path:"/creation",key:2,component:z}),r.a.createElement(s.a,{exact:!0,path:"/contest",key:3,component:H})))}var K=function(){return r.a.createElement("div",{className:"App"},r.a.createElement($,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[181,1,2]]]);
//# sourceMappingURL=main.3b901be9.chunk.js.map